<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Фитнес на 30 дней</title>
  <meta name="theme-color" content="#4CAF50" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="https://i.imgur.com/uk2X9iX.png" />

  <style>
    :root {
      --bg: #f9f9f9;
      --card: #fff;
      --accent: #4CAF50;
      --muted: #666;
      --radius: 10px;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: #222;
      text-align: center;
    }

    header {
      background: var(--accent);
      color: white;
      padding: 16px 12px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    header h1 { margin:0; font-size:18px; }

    .container { max-width:900px; margin:12px auto; padding:10px; }

    .progress-outer {
      background:#e6e6e6;
      border-radius:999px;
      height:14px;
      overflow:hidden;
      margin:12px 0;
    }

    .progress-inner {
      height:100%;
      width:0;
      background:linear-gradient(90deg,#67d38a,#4CAF50);
      transition: width .4s;
    }

    .stats { display:flex; justify-content:space-between; gap:8px; color:var(--muted); font-size:14px; margin-bottom:10px; }

    .today {
      background: var(--card);
      padding:12px;
      border-radius: var(--radius);
      box-shadow:0 2px 4px rgba(0,0,0,0.04);
      margin-bottom:10px;
    }

    .calendar {
      display:grid;
      grid-template-columns:repeat(6,1fr);
      gap:8px;
      margin-bottom:12px;
    }

    .cal-day {
      background:var(--card);
      padding:10px;
      border-radius:8px;
      text-align:center;
      border:1px solid #eee;
      font-size:14px;
      cursor:pointer;
      touch-action: manipulation;
    }

    .cal-day.done { background:var(--accent); color:#fff; border-color:#46a049; }

    .ex-list { display:flex; flex-direction:column; gap:8px; }

    .ex {
      display:flex;
      gap:10px;
      align-items:center;
      background:var(--card);
      padding:12px;
      border-radius:12px;
      border:1px solid #eee;
    }

    .ex img {
      width:72px;
      height:72px;
      border-radius:10px;
      object-fit:cover;
      background:#f0f0f0;
    }

    .ex b { display:block; font-size:16px; }

    .controls { display:flex; gap:8px; justify-content:center; margin-top:12px; }

    .btn {
      background: var(--accent);
      color:white;
      padding:10px 14px;
      border-radius:12px;
      border:none;
      font-size:15px;
      cursor:pointer;
      touch-action:manipulation;
    }

    .btn.secondary { background:#eee; color:#222; }

    footer { padding:12px; text-align:center; color:var(--muted); font-size:13px; margin-top:14px; }

    @media (max-width:480px){
      .ex img { width:64px; height:64px; }
      .cal-day { padding:12px; font-size:15px; }
      .btn { padding:12px 16px; font-size:16px; }
    }
  </style>
</head>

<body>
  <header><h1>Фитнес на 30 дней</h1></header>

  <main class="container" role="main">
    <div class="progress-outer"><div id="progressBar" class="progress-inner"></div></div>
    <div class="stats">
      <div>Выполнено: <b id="daysDone">0</b></div>
      <div>Осталось: <b id="daysLeft">30</b></div>
    </div>
    <div id="todayLabel" class="today">Сегодня: День 1 — Силовая</div>
    <div class="ex-list" id="exList" aria-live="polite"></div>

    <h3 style="margin-top:14px">Календарь</h3>
    <div class="calendar" id="calendar" aria-label="Календарь тренировок"></div>

    <div class="controls">
      <button id="markDone" class="btn">Отметить день как выполненный</button>
      <button id="resetBtn" class="btn secondary">Сбросить прогресс</button>
    </div>

    <footer>Добавь сайт на главный экран через «Поделиться → На экран ’Домой’».</footer>
  </main>

  <script>
    const DAYS = 30;
    const STORAGE_KEY = 'fitness30_plan_v1';

    function createDefaultPlan(){
      const plan=[];
      for(let i=1;i<=DAYS;i++){
        let type=(i%7===0)?'Восстановление':(i%2===1)?'Силовая':'Кардио';
        plan.push({day:i,type,completed:false,exercises:generateExercisesForDay(i)});
      }
      return plan;
    }

    function generateExercisesForDay(i){
      const warm={name:'Разминка — 5 минут',icon:'https://i.imgur.com/uk2X9iX.png'};
      const stretch={name:'Растяжка — 6 минут',icon:'https://i.imgur.com/uk2X9iX.png'};
      const main=[];
      if(i%7===0){
        main.push({name:'Лёгкая прогулка — 15 мин',icon:'https://i.imgur.com/uk2X9iX.png'});
      } else if(i%2===1){
        main.push({name:`Отжимания — ${5+Math.floor(i/2)*2} раз`,icon:'https://i.imgur.com/Fxh2S1H.png'});
        main.push({name:`Приседания — ${10+Math.floor(i/2)*3} раз`,icon:'https://i.imgur.com/uk2X9iX.png'});
        main.push({name:`Планка — ${20+Math.floor(i/2)*5} сек`,icon:'https://i.imgur.com/WCZzj9Y.png'});
      } else {
        main.push({name:`Бёрпи — ${5+Math.floor(i/2)} раз`,icon:'https://i.imgur.com/uk2X9iX.png'});
        main.push({name:`Скакалка — ${30+Math.floor(i/2)*10} сек`,icon:'https://i.imgur.com/uk2X9iX.png'});
        main.push({name:`Скручивания — ${12+Math.floor(i/2)*3} раз`,icon:'https://i.imgur.com/G7dkjCb.png'});
      }
      return [warm,...main,stretch];
    }

    function loadPlan(){
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if(raw) return JSON.parse(raw);
      } catch(e){}
      return createDefaultPlan();
    }

    function savePlan(p){ localStorage.setItem(STORAGE_KEY, JSON.stringify(p)); }

    let plan = loadPlan();
    let currentDay = 1;

    function renderCalendar(){
      const cal = document.getElementById('calendar'); 
      cal.innerHTML='';
      for(let i=1;i<=DAYS;i++){
        const div = document.createElement('div');
        div.className = 'cal-day' + (plan[i-1].completed ? ' done' : '');
        div.textContent = i;
        div.tabIndex = 0;
        div.addEventListener('click', ()=> setCurrentDay(i));
        div.addEventListener('keydown', (e)=>{ if(e.key==='Enter') setCurrentDay(i); });
        cal.appendChild(div);
      }
    }

    function renderExercises(){
      const d = plan[currentDay-1];
      document.getElementById('todayLabel').textContent = `Сегодня: День ${d.day} — ${d.type}`;
      const exList = document.getElementById('exList'); 
      exList.innerHTML='';
      d.exercises.forEach(ex=>{
        const el = document.createElement('div'); 
        el.className='ex';
        el.innerHTML = `<img src="${ex.icon}" alt="${ex.name}"><div><b>${ex.name}</b></div>`;
        exList.appendChild(el);
      });
    }

    function renderProgress(){
      const done = plan.filter(p=>p.completed).length;
      document.getElementById('daysDone').textContent = done;
      document.getElementById('daysLeft').textContent = DAYS - done;
      document.getElementById('progressBar').style.width = (done/DAYS*100) + '%';
    }

    function setCurrentDay(n){ currentDay=n; renderExercises(); }

    document.getElementById('markDone').addEventListener('click', ()=>{
      plan[currentDay-1].completed = true;
      savePlan(plan);
      renderCalendar(); renderProgress();
    });

    document.getElementById('resetBtn').addEventListener('click', ()=>{
      if(confirm('Сбросить прогресс?')){
        plan=createDefaultPlan(); currentDay=1; savePlan(plan);
        renderCalendar(); renderExercises(); renderProgress();
      }
    });

    renderCalendar(); renderExercises(); renderProgress();
  </script>
</body>
</html>











